!function(e,t){"use strict";var o;o=function(){var o,n,i,r,a,s=e.document,l={expires:null,path:"/",domain:null,secure:!1},c=function(t){"object"==typeof e.console&&null!==e.console&&"function"==typeof e.console.warn&&(c=function(t){e.console.warn(t)})(t)},u=function(e){var t,o;return"object"!=typeof e||null===e?t=l:(t={expires:l.expires,path:l.path,domain:l.domain,secure:l.secure},"object"==typeof e.expires&&e.expires instanceof Date?t.expires=e.expires:"object"==typeof e.expires_at&&e.expires_at instanceof Date?(t.expires=e.expires_at,c('Cookie option "expires_at" has been deprecated. Rename to "expires". Support for "expires_at" will be removed in a version to come.')):"object"==typeof e.expiresAt&&e.expiresAt instanceof Date?(t.expires=e.expiresAt,c('Cookie option "expiresAt" has been deprecated. Rename to "expires". Support for "expiresAt" will be removed in a version to come.')):"number"==typeof e.hoursToLive&&0!==e.hoursToLive&&((o=new Date).setTime(o.getTime()+60*e.hoursToLive*60*1e3),t.expires=o,c('Cookie option "hoursToLive" has been deprecated. Rename to "expires" and prodvide a Date instance (see documentation). Support for "hoursToLive" will be removed in a version to come.')),"string"==typeof e.path&&""!==e.path&&(t.path=e.path),"string"==typeof e.domain&&""!==e.domain&&(t.domain=e.domain),!0===e.secure&&(t.secure=e.secure)),t},f=(String.prototype.trim?i=function(e){return String.prototype.trim.call(e)}:(r=/^\s+/,a=/\s+$/,i=function(e){return e.replace(r,"").replace(a,"")}),i),p=(o=/\d/,n=e.isNaN,function(e){return null===e||!o.test(e)||n(e)}),d=function(){var e,t;return e=JSON&&"function"==typeof JSON.parse?function(e){var t=null;if("string"==typeof e&&""!==e&&""!==(e=f(e)))try{t=JSON.parse(e)}catch(e){t=null}return t}:function(){return null},t=new RegExp("^(?:\\{.*\\}|\\[.*\\])$"),function(){var o,n,i,r,a,l={},c=s.cookie.split(";"),u=c.length;for(o=0;o<u;o+=1){n=c[o].split("="),i=f(n.shift()),r=n.length>=1?n.join("="):"";try{a=decodeURIComponent(r)}catch(e){a=r}try{a="true"===a||"false"!==a&&(p(a)?t.test(a)?e(a):a:parseFloat(a))}catch(e){}l[i]=a}return l}}();return{get:function(e){var o,n,i=d();if("string"==typeof e)o=i[e]!==t?i[e]:null;else if("object"==typeof e&&null!==e)for(n in o={},e)Object.prototype.hasOwnProperty.call(e,n)&&(i[e[n]]!==t?o[e[n]]=i[e[n]]:o[e[n]]=null);else o=i;return o},filter:function(e){var t,o={},n=d();for(t in"string"==typeof e&&(e=new RegExp(e)),n)Object.prototype.hasOwnProperty.call(n,t)&&t.match(e)&&(o[t]=n[t]);return o},set:function(e,o,n){if("object"==typeof n&&null!==n||(n={}),o===t||null===o)o="",n.expires=new Date,n.expires.setFullYear(1978);else if("string"!=typeof(o=!0===o?"true":!1===o?"false":p(o)?o:String(o))){if("object"!=typeof JSON||null===JSON||"function"!=typeof JSON.stringify)throw new Error("cookies.set() could not be serialize the value");o=JSON.stringify(o)}s.cookie=e+"="+encodeURIComponent(o)+function(e){return["object"==typeof(e=u(e)).expires&&e.expires instanceof Date?"; expires="+e.expires.toGMTString():"","; path="+e.path,"string"==typeof e.domain?"; domain="+e.domain:"",!0===e.secure?"; secure":""].join("")}(n)},del:function(e,t){var o,n={};for(o in"object"==typeof t&&null!==t||(t={}),"boolean"==typeof e&&!0===e?n=this.get():"string"==typeof e&&(n[e]=!0),n)Object.prototype.hasOwnProperty.call(n,o)&&"string"==typeof o&&""!==o&&this.set(o,null,t)},test:function(){var e=!1,t="test_cookies_jaaulde_js",o="data";return this.set(t,o),this.get(t)===o&&(this.del(t),e=!0),e},setOptions:function(e){"object"!=typeof e&&(e=null),l=u(e)}}},"object"==typeof module&&null!==module&&module.exports?module.exports=exports=o():"function"==typeof define&&define.amd?define(o):e.cookies=o()}(this);let listTable,url="",currentUrl="";const loadDatatable=function(e,t,o){let n={};!1===_.isUndefined(t)&&(n.filters=t),!1===_.isUndefined(o)&&(n.take=o),axios.get(e,{params:n,onUploadProgress:function(e){$("#overlayLoader").show()}}).then((e=>{let t=e.data,o=t.paginated.data;if(listTable.bootstrapTable("load",o),!1===_.isUndefined(t.links)){let e=t.links,o=_.template(e)();$("#datatable-pagination").html(o)}!1===_.isUndefined(t.currentUrl)&&(currentUrl=t.currentUrl)})).catch((e=>{})).finally((()=>{$("#overlayLoader").hide()}))},flashMessage=function(){let e=cookies.get("flash-message"),t=cookies.get("flash-status");!1===_.isUndefined(e)&&!1===_.isNull(e)&&(Toast.fire({icon:t,title:e}),cookies.del("flash-message"),cookies.del("flash-status"))},commitPost=function(e){let t=e.attr("action");!1===_.isUndefined(t)&&($(".invalid-feedback").hide(),fireRequest(e,t))},onImageUpload=async function(e,t){let o=new FormData;o.append("image",e,e.name),await axios({url:route("editor.upload_image"),method:"POST",data:o}).then((e=>{let o=e.data.url;t.summernote("insertImage",o)})).catch((e=>{console.error(e)}))},previewImage=function(e){let t=e.get(0),o=$(e.data("preview-target")).find(".row").empty();if(t.files){var n=t.files.length;for(i=0;i<n;i++){var r=new FileReader;r.onload=function(e){$($.parseHTML('<div class="col-max"><img src="'+e.target.result+'" class="img-thumbnail"></div>')).appendTo(o)},r.readAsDataURL(t.files[i])}}},fireRequest=function(e,t){axios.request({method:"POST",url:t,data:new FormData(e[0]),headers:{"Content-Type":"multipart/form-data","X-Requested-With":"XMLHttpRequest"},onUploadProgress:function(e){$("#overlayLoader").show()}}).then((e=>{let t=e.data;t.hasOwnProperty("flash")&&_.isString(t.flash)&&(cookies.set("flash-status",t.status),cookies.set("flash-message",t.flash)),t.hasOwnProperty("redirect")&&t.redirect&&$(location).attr("href",t.redirect),t.hasOwnProperty("reload")&&t.reload&&location.reload(),t.hasOwnProperty("relist")&&t.relist&&(flashMessage(),loadDatatable(currentUrl))})).catch((e=>{let t=e.response.data,o=t.errors;t.message;_.forEach(o,(function(e,t){$("#"+t+"-alert").html(_.join(e,"<br>")).show()})),Toast.fire({icon:"error",title:"Whoops! Something went wrong!"})})).finally((()=>{$("#overlayLoader").hide()}))},webPush=function(e,t,o,n,i){Push.create(e,{body:t,icon:o,link:n,timeout:i,onClick:function(){window.focus(),this.close()}})},toastPush=function(e,t,o,n,i){Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:i,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:"success",title:e,html:t})};$(document).ready((function(){_.attempt(flashMessage),$("#overlayLoader").hide(),!1===_.isUndefined(url)&&(listTable=$(".bootstrap-table").bootstrapTable({onReorderRow:e=>{let t=[];_.forEach(e,(function(e,o){t.push(e.id)})),$("#newRow").val(t.join(",")),$("form[data-ajax-form]").trigger("submit")}}),_.attempt(loadDatatable,url)),$(document).on("click",".page-link",(function(e){if("datatable-pagination"==$(this).closest("div").attr("id")){e.preventDefault();let t=$(this).attr("href");loadDatatable(t)}})),$(document).on("change","#pageTake",(function(e){e.preventDefault();let t={};t.filter=$(".filterInput").serialize(),loadDatatable(currentUrl,t,$(this).val())})),$(document).on("submit","form[data-ajax-form]",(function(e){e.preventDefault();let t=$(this),o=t.data("confirm");!1===_.isUndefined(o)?Swal.fire({title:"Are you sure?",text:o,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, please!"}).then((e=>{e.value&&commitPost(t)})):commitPost(t)})),$(document).on("click","#filterBtn",(function(e){e.preventDefault();let t={};t.filter=$(".filterInput").serialize(),loadDatatable(url,t),$("#filterModalCenter").modal("hide")})),$(".image-file").length&&$(document).on("change",".image-file",(function(e){previewImage($(this))}))}));
